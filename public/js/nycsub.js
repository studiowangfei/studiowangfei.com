function initialize(){function i(a){var b=stations[a].Route;return"1"===b||"2"===b||"3"===b?"#EE352E":"4"===b||"5"===b||"6"===b?"#00933C":"7"===b?"#B933AD":"A"===b||"C"===b||"E"===b?"#2850AD":"B"===b||"D"===b||"F"===b||"M"===b?"#FF6319":"N"===b||"Q"===b||"R"===b?"#FCCC0A":"J"===b||"Z"===b?"#996633":"L"===b?"#A7A9AC":"G"===b?"#6CBE45":"S"===b?"#A7A9AC":void 0}function m(a,b){return function(){var c='<div class="nycsub_map_infowindow"><div id="station_name">'+stations[b].Station_name+"</div>"+'<div class="ridership_year">Year: '+stations[b].TOTAL+" (*0.01)</div>"+'<div class="ridership_weekday">Avg. Weekday: '+stations[b].AVWKDY+"</div>"+'<div class="ridership_weekend">Avg. Weekend: '+stations[b].AVSUN+"</div>"+"</div>";l=new google.maps.InfoWindow({content:c,disableAutoPan:!0}),l.open(d,a)}}function n(){return function(){l.close()}}for(var e,a=[{featureType:"water",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#0008FF"},{saturation:-54},{lightness:-42}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{hue:"#1100ff"},{color:"#808080"},{lightness:100}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#cccccc"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{elementType:"labels",stylers:[{hue:"#0033ff"},{color:"#0033ff"},{visibility:"off"}]},{featureType:"road.highway",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{hue:"#ff00e6"},{visibility:"off"}]},{featureType:"transit.station.rail",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{visibility:"on"},{hue:"#0800ff"},{color:"#000000"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#808080"},{visibility:"on"},{lightness:100}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#808080"},{lightness:30}]},{featureType:"landscape.natural",stylers:[{visibility:"on"},{color:"#808080"},{lightness:100}]}],b=new google.maps.StyledMapType(a,{name:"NYC Subway Ridership Viz"}),c={zoom:14,center:new google.maps.LatLng(40.757552,-73.969055),disableDefaultUI:!0,streetViewControl:!1,zoomControl:!0,panControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},d=new google.maps.Map(document.getElementById("nycsub_map-canvas"),c),f=[],g=0;g<stations.length;g++){var h=new google.maps.LatLng(stations[g].Latitude,stations[g].Longitude);new google.maps.Marker({position:h,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:i(g),fillOpacity:.5,scale:stations[g].AVSUN_ROOT/5,strokeColor:"gold",strokeWeight:0},draggable:!1,map:d}),new google.maps.Marker({position:h,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:i(g),fillOpacity:.5,scale:stations[g].AVWKDY_ROOT/5,strokeColor:"gold",strokeWeight:0},draggable:!1,map:d}),f[g]=new google.maps.Marker({position:h,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:i(g),fillOpacity:.25,scale:stations[g].TOTAL_ROOT/50,strokeColor:"black",strokeWeight:0},draggable:!1,map:d}),e=new google.maps.Marker({position:h,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"white",fillOpacity:1,scale:2,strokeColor:"black",strokeWeight:0},draggable:!1,map:d})}for(var l,g=0;g<stations.length;g++)f[g].addListener("mouseover",m(f[g],g)),f[g].addListener("mouseout",n());d.mapTypes.set("map_style",b),d.setMapTypeId("map_style");var o=new google.maps.TransitLayer;o.setMap(d)}$(document).ready(function(){function k(a,b){for(var c=0;c<a.length;c++)$("#nycsub_back_"+a[c]).css("box-shadow","0px 4px 1px"+b)}function l(a){var b=a[0];return $("#nycsub_flipper_"+b).hasClass("nycsub_selected_flipper")?0:1}function m(a){for(var k=l(c)+l(d)+l(e)+l(f)+l(g)+l(h)+l(i)+l(j),m=b.filter(function(b){return a.indexOf(b)<0}),n=0;n<m.length;n++){var o=m[n];$("#nycsub_flipper_"+o).removeClass("nycsub_selected_flipper")}if(console.log(k),7===k+l(a))for(var p=0;p<a.length;p++){var q=a[p];$("#nycsub_flipper_"+q).removeClass("nycsub_selected_flipper")}else for(var p=0;p<a.length;p++){var q=a[p];$("#nycsub_flipper_"+q).addClass("nycsub_selected_flipper")}}function p(a){return function(){scrollHeight=$(window).scrollTop(),o=a,$("body, html").css("overflow","hidden"),$(".nycsub_slide_img img").hide(),$(".nycsub_slide_container").show(),$("#nycsub_ridermap_big_"+a).fadeIn("slow"),s()}}function q(){0===o?(o=59,$(".nycsub_slide_img img").hide(),$("#nycsub_ridermap_big_"+o).fadeIn()):(o--,$(".nycsub_slide_img img").hide(),$("#nycsub_ridermap_big_"+o).fadeIn("slow")),s()}function r(){59===o?(o=0,$(".nycsub_slide_img img").hide(),$("#nycsub_ridermap_big_"+o).fadeIn()):(o++,$(".nycsub_slide_img img").hide(),$("#nycsub_ridermap_big_"+o).fadeIn("slow")),s()}function s(){var a=$(window).height();$(window).width();var c=$(".nycsub_slide").height();a-c>0?$(".nycsub_slide").css("margin-top",.5*(a-c)+"px"):$(".nycsub_slide").css("margin-top","48px"),$("#nycsub_arrow_left, #nycsub_arrow_right").css("margin-top",.5*(c-72)+"px")}function u(){var a=$("#nycsub_map-canvas").width(),b=$(".nycsub_map_container").css("display");"none"===b&&$("#nycsub_map-canvas").css("height",.6875*a+"px")}$(window).resize(function(){s(),u()}),$(window).scroll(function(){var a=$(window).scrollTop(),b=$(".nycsub").height();a>640&&400+b>a?$(".nycsub_lines").fadeIn("slow"):$(".nycsub_lines").fadeOut("slow")});for(var a=0;60>a;a++)$(".nycsub").append('<div class="nycsub_flipper" id="nycsub_flipper_'+a+'"><div class="nycsub_front"></div><div class="nycsub_back" id="nycsub_back_'+a+'"></div></div>'),$("#nycsub_flipper_"+a+" .nycsub_front").css("background-image",'url("../img/project/nycsub/riders/nycsub_sprite_front.png")').css("background-repeat","no-repeat").css("background-position",-140*a+"px 0px"),$("#nycsub_flipper_"+a+" .nycsub_back").css("background-image",'url("../img/project/nycsub/riders/nycsub_sprite_back.png")').css("background-repeat","no-repeat").css("background-position",-140*a+"px 0px");for(var b=[],a=0;60>a;a++)b.push(a);var c=[2,10,18,26,28,29,42,46,49,59],d=[7,8,25,32,34,41,44,48,54,58],e=[13],f=[3,5,11,17,21,33,38,45,52,53,56,57],g=[1,4,6,9,19,23,27,31,35,36,39,40,43,47,51],h=[0,12,14,15,37,50],i=[16,20,22,24,30],j=[55];k(c,"#EE352E"),k(d,"#00933C"),k(e,"#B933AD"),k(f,"#2850AD"),k(g,"#FF6319"),k(h,"#FCCC0A"),k(i,"#996633"),k(j,"#A7A9AC"),$("#nycsub_all").click(function(){if(0===l(c)+l(d)+l(e)+l(f)+l(g)+l(h)+l(i)+l(j))for(var a=0;a<b.length;a++)$("#nycsub_flipper_"+a).removeClass("nycsub_selected_flipper");else for(var a=0;a<b.length;a++)$("#nycsub_flipper_"+a).addClass("nycsub_selected_flipper")}),$("#nycsub_123").click(function(){m(c)}),$("#nycsub_456").click(function(){m(d)}),$("#nycsub_7").click(function(){m(e)}),$("#nycsub_ace").click(function(){m(f)}),$("#nycsub_bdfm").click(function(){m(g)}),$("#nycsub_nqr").click(function(){m(h)}),$("#nycsub_jz").click(function(){m(i)}),$("#nycsub_l").click(function(){m(j)}),$("#nycsub_down").click(function(){var a=$(".outer-container").height(),b=$("#nycsub_map-canvas").height();$("body, html").animate({scrollTop:a-b-240},"slow")}),$("#map_fullscreen").click(function(){scrollHeight=$(window).scrollTop(),$("#map_close, .nycsub_map_scale_fullscreen").css("display","initial"),$("body, html").css("overflow","hidden"),$(".nycsub_map_container").show(),$("#nycsub_map-canvas").css("height","100%").css("z-index","10").css("position","fixed")}),$("#map_close").click(function(){$("#map_close, .nycsub_map_scale_fullscreen").css("display","none"),$("body, html").css("overflow","auto"),$(".nycsub_map_container").hide(),$("#nycsub_map-canvas").css("position","relative").css("z-index","1"),u()});for(var n=0;60>n;n++)$(".nycsub_slide_img").append('<img id="nycsub_ridermap_big_'+n+'" src="../img/project/nycsub/riders/b_black/'+n+'.png"/>');for(var o=0,t=0;60>t;t++)$("#nycsub_back_"+t).click(p(t));$("#nycsub_arrow_left").click(q),$("#nycsub_arrow_right").click(r),$(".nycsub_slide_img img").click(r),$(document).keyup(function(a){27==a.keyCode&&($("#map_close, .nycsub_map_scale_fullscreen").css("display","none"),$(".nycsub_slide_container").hide(),$(".nycsub_map_container").hide(),$("#nycsub_map-canvas").css("position","relative").css("z-index","1"),u())}),$(".nycsub_close").click(function(){$("body, html").css("overflow","auto"),$(".nycsub_slide_container").hide()}),u()});var map;google.maps.event.addDomListener(window,"load",initialize);
