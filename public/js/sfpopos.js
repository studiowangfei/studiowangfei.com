function initialize(){function k(a){return function(){var b='<div class="sfpopos_map_infowindow" id="sfpopos_map_infowindow_'+a+'">'+'<div id="popos_address">'+popos[a].address+"</div>"+'<div class="popos_year">Year: '+popos[a].year+"</div>"+'<div class="popos_quality">Spatial Quality: '+popos[a].quality+"</div>"+'<div class="popos_description">'+popos[a].description+"</div>"+'<div class="popos_photo"><img src="../img/project/sfpopos/site_photos/'+a+'.jpg"/></div>'+"</div>";i=new google.maps.InfoWindow({content:b,disableAutoPan:!1}),j&&j.close(),j=i,i.open(d,e[a])}}var a=[{featureType:"water",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#0008FF"},{saturation:-54},{lightness:-42}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:21}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#000000"},{weight:.1},{lightness:-100}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:-15}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"},{color:"#808080"},{hue:"#000000"},{lightness:50}]},{featureType:"landscape.natural",elementType:"all",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#3ba635"},{saturation:-70},{lightness:50}]}],b=new google.maps.StyledMapType(a,{name:"San Francisco POPOS Viz"}),c={zoom:15,center:new google.maps.LatLng(37.791117,-122.399004),disableDefaultUI:!1,streetViewControl:!1,zoomControl:!0,panControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},d=new google.maps.Map(document.getElementById("sfpopos_map-canvas"),c);d.mapTypes.set("map_style",b),d.setMapTypeId("map_style");for(var e=[],f=0;f<popos.length;f++){var h,g=new google.maps.LatLng(popos[f].latitude,popos[f].longitude);h="poor"===popos[f].quality?"#b5dea2":"fair"===popos[f].quality?"#6CBE45":"good"===popos[f].quality?"#4b8530":"#2b4c1b",e[f]=new google.maps.Marker({position:g,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:h,fillOpacity:.85,scale:20,strokeColor:"black",strokeWeight:0},draggable:!1,map:d})}for(var i,j=!1,f=0;f<popos.length;f++)e[f].addListener("click",k(f))}$(document).ready(function(){function a(){var a=$(".sfpopos_video").width();$(".sfpopos_video iframe").css("height",.655*a+"px")}function b(){var a=$("#sfpopos_map-canvas").width(),b=$(".sfpopos_map_container").css("display");"none"===b&&$("#sfpopos_map-canvas").css("height",.67*a+"px")}$(document).keyup(function(a){27==a.keyCode&&($("#map_close").css("display","none"),$(".sfpopos_map_container").hide(),$("#sfpopos_map-canvas").css("position","relative").css("z-index","1"),b())}),a(),b(),$(window).resize(function(){slide_resize(),a(),b()}),$("#map_fullscreen").click(function(){scrollHeight=$(window).scrollTop(),$("#map_close").css("display","initial"),$("body, html").css("overflow","hidden"),$(".sfpopos_map_container").show(),$("#sfpopos_map-canvas").css("height","100%").css("z-index","10").css("position","fixed")}),$("#map_close").click(function(){$("#map_close").css("display","none"),$("body, html").css("overflow","auto"),$(".sfpopos_map_container").hide(),$("#sfpopos_map-canvas").css("position","relative").css("z-index","1"),b()})});var map;google.maps.event.addDomListener(window,"load",initialize);
