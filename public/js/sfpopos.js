function initialize(){function e(e){return function(){var o='<div class="sfpopos_map_infowindow" id="sfpopos_map_infowindow_'+e+'"><div id="popos_address">'+popos[e].address+'</div><div class="popos_year">Year: '+popos[e].year+'</div><div class="popos_quality">Spatial Quality: '+popos[e].quality+'</div><div class="popos_description">'+popos[e].description+'</div><div class="popos_photo"><img src="../img/project/sfpopos/site_photos/'+e+'.jpg"/></div></div>';r=new google.maps.InfoWindow({content:o,disableAutoPan:!1}),f&&f.close(),f=r,r.open(p,a[e])}}var o=[{featureType:"water",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#0008FF"},{saturation:-54},{lightness:-42}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:21}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#000000"},{weight:.1},{lightness:-100}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:-15}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"},{color:"#808080"},{hue:"#000000"},{lightness:50}]},{featureType:"landscape.natural",elementType:"all",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#3ba635"},{saturation:-70},{lightness:50}]}],s=new google.maps.StyledMapType(o,{name:"San Francisco POPOS Viz"}),i={zoom:12,center:new google.maps.LatLng(37.791117,-122.399004),disableDefaultUI:!1,streetViewControl:!1,zoomControl:!0,panControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},p=new google.maps.Map(document.getElementById("sfpopos_map-canvas"),i);p.mapTypes.set("map_style",s),p.setMapTypeId("map_style");for(var a=[],t=0;t<popos.length;t++){var l,n=new google.maps.LatLng(popos[t].latitude,popos[t].longitude);l="poor"===popos[t].quality?"#b5dea2":"fair"===popos[t].quality?"#6CBE45":"good"===popos[t].quality?"#4b8530":"#2b4c1b",a[t]=new google.maps.Marker({position:n,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:l,fillOpacity:.85,scale:15,strokeColor:"black",strokeWeight:0},draggable:!1,map:p})}for(var r,f=!1,t=0;t<popos.length;t++)a[t].addListener("click",e(t));new google.maps.TransitLayer}$(document).ready(function(){function e(){var e=$(".sfpopos_video").width();$(".sfpopos_video iframe").css("height",.655*e+"px")}function o(){var e=$("#sfpopos_map-canvas").width(),o=$(".sfpopos_map_container").css("display");"none"===o&&$("#sfpopos_map-canvas").css("height",.67*e+"px")}function s(){$(".sfpopos_feature_regular > img:first").fadeOut(1e3).next().fadeIn(1e3).end().appendTo(".sfpopos_feature_regular")}function i(){p=setInterval(s,4e3)}$(document).keyup(function(e){27==e.keyCode&&($("#map_close").css("display","none"),$(".sfpopos_map_container").hide(),$("#sfpopos_map-canvas").css("position","relative").css("z-index","1"),o())}),e(),o(),$(window).resize(function(){e(),o()}),$(".sfpopos_feature_regular > img:gt(0)").hide();var p;i(),$("#sfpopos_map_fullscreen").click(function(){scrollHeight=$(window).scrollTop(),$("#map_close").css("display","initial"),$("body, html").css("overflow","hidden"),$(".sfpopos_map_container").show(),$("#sfpopos_map-canvas").css("height","100%").css("z-index","10").css("position","fixed")}),$("#map_close").click(function(){$("#map_close").css("display","none"),$("body, html").css("overflow","auto"),$(".sfpopos_map_container").hide(),$("#sfpopos_map-canvas").css("position","relative").css("z-index","1"),o()})});var map;google.maps.event.addDomListener(window,"load",initialize);
