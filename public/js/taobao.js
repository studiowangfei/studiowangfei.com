$(document).ready(function(){function d(){$(".project_img > img:first").fadeOut(1e3).next().fadeIn(1e3).end().appendTo(".project_img")}function f(){e=setInterval(d,4e3)}function g(){clearInterval(e)}function h(){var a=$(window).height();$(window).width();var c=$(".project_slide").height();a-c>0?$(".project_slide").css("margin-top",.5*(a-c)+"px"):$(".project_slide").css("margin-top","48px"),$("#project_arrow_left, #project_arrow_right").css("margin-top",.5*(c-72)+"px")}function j(a){return function(){i=a,$("body, html").css("overflow","hidden"),$(".project_slide_container").show(),$(".project_slide_img img").hide(),$("#project_big_"+a).fadeIn("slow"),h()}}function k(){0===i?(i=b-1,$(".project_slide_img img").hide(),$("#project_big_"+i).fadeIn("slow")):(i--,$(".project_slide_img img").hide(),$("#project_big_"+i).fadeIn("slow"))}function l(){i===b-1?(i=0,$(".project_slide_img img").hide(),$("#project_big_"+i).fadeIn("slow")):(i++,$(".project_slide_img img").hide(),$("#project_big_"+i).fadeIn("slow"))}function w(){function c(a,b,c){for(var d=1;d<a.length;d++){var e=1.5*$("#taobao_poker_small_0").width();$("#taobao_poker_small_"+a[d]).css("top",1.5*(a[0]-108-c)*e+"px"),5>d&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)-12*(d-1)+"%"),d>4&&9>d&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)+11-12*(d-5)+"%"),d>8&&13>d&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)+22-12*(d-9)+"%"),d>12&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)+33-12*(d-13)+"%")}}$(".movetop").css("transition","top 0.3s, left 0.3s").css("margin-right","-7%");for(var a=0;a<o.length;a++){var b=1.5*$("#taobao_poker_small_0").width();$("#taobao_poker_small_"+o[a]).css("top",-1.5*b+"px"),2>a&&$("#taobao_poker_small_"+o[a]).css("left","12%"),a>1&&$("#taobao_poker_small_"+o[a]).css("left",34-12*(a-1)+"%")}for(var a=0;a<s.length;a++){var b=1.5*$("#taobao_poker_small_0").width();$("#taobao_poker_small_"+s[a]).css("top",-3*b+"px"),2>a&&$("#taobao_poker_small_"+s[a]).css("left","65%"),a>1&&$("#taobao_poker_small_"+s[a]).css("left",87-12*(a-1)+"%")}c(p,0,0),c(q,0,0),c(r,0,0),c(t,53,1),c(u,53,1),c(v,53,1)}function x(a,b){return function(){$(".movetop").css("transition","top 0s, left 0s");var c=document.getElementById("taobao_poker_small_"+a),d=c.offsetTop;$("#taobao_poker_small_"+a).css("top",d+b+"px")}}function B(a,b,c){for(var d=a;b>d;d++)$(".shuffle_"+c).append('<img id="shuffle_front_'+d+'" src="../img/project/taobao/poker/small/'+A[d]+'.png"/><img class="poker_back_cover" id="shuffle_back_'+d+'" src="../img/project/taobao/poker/small/back_e.png"/>'),$("#shuffle_front_"+d).css("margin-right","-16%")}function C(a){$("#shuffle_back_"+a).click(function(){$(this).css("opacity","0")}),$("#shuffle_front_"+a).click(function(){$("#shuffle_back_"+a).css("opacity","0")})}function D(a){return C(a)}function E(a){var b=$("#shuffle_front_"+a),c=$("#shuffle_back_"+a),d=A[a];b.attr("src","../img/project/taobao/poker/small/"+d+".png"),b.data("poker-id",d),c.data("poker-id",d)}function F(a,b,c){$(c).mouseenter(function(){for(var c=a;b>c;c++)$("#shuffle_front_"+c).css("top","-48px")}),$(c).mouseleave(function(){for(var c=a;b>c;c++)$("#shuffle_front_"+c).css("top","0px")}),$(c).click(function(){for(var c=a;b>c;c++)$("#shuffle_back_"+c).css("opacity",0)})}function G(a,b){function d(){var a=$(window).height(),b=$(".taobao_slide").height();a-b>0?$(".taobao_slide").css("margin-top",.5*(a-b)+"px"):$(".taobao_slide").css("margin-top",0)}H=a;var c=$(b.target).data("poker-id");i=a.indexOf(c),$("body, html").css("overflow","hidden"),$(".taobao_slide_img img").hide(),$(".taobao_slide_container").show(),$("#taobao_poker_big_"+c).fadeIn("slow"),d(),$(window).resize(function(){var a=$(window).height(),b=$(".taobao_slide").height();a-b>0?$(".taobao_slide").css("margin-top",.5*(a-b)+"px"):$(".taobao_slide").css("margin-top",0)});var e=$(".taobao_slide").width();$("#taobao_arrow_right").css("margin-left",e-12+"px"),$(window).resize(function(){var a=$(".taobao_slide").width();$("#taobao_arrow_right").css("margin-left",a-12+"px")})}function I(){0===i?(i=107,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+H[i]).fadeIn()):(i--,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+H[i]).fadeIn("slow"))}function J(){107===i?(i=0,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+H[i]).fadeIn()):(i++,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+H[i]).fadeIn("slow"))}var a;$(window).on("beforeunload",function(){$(window).scrollTop(0)}),$("#scroll").click(function(){$("body, html").animate({scrollTop:800},"slow")});for(var b=9,c=0;b>c;c++)$(".project_img").append('<img id="project_small_'+c+'" src="../img/project/taobao/'+c+'_small.jpg"/>'),$(".project_slide_img").append('<img id="project_big_'+c+'" src="../img/project/taobao/'+c+'_big.jpg"/>');$(".project_img > img:gt(0)").hide();var e;$(function(){f(),$(".project_img").hover(function(){g()},function(){f()})}),$(window).resize(function(){h()});for(var i=0,m=0;b>m;m++)$("#project_small_"+m).click(j(m));$("#project_arrow_left").click(k),$("#project_arrow_right").click(l),$(".project_slide_img img").click(l),$(".project_close").click(function(){$("body, html").css("overflow","auto"),$(".project_slide_container").hide()});for(var a=0;108>a;a++){54>a?$(".taobao_items_1").append('<div class="movetop" id="taobao_poker_small_'+a+'"></div>'):$(".taobao_items_2").append('<div class="movetop" id="taobao_poker_small_'+a+'"></div>');var n=$(".movetop").width();$(".movetop").css("height",1.5*n+"px"),$("#taobao_poker_small_"+a).css("background-image",'url("../img/project/taobao/poker/taobao_sprite.png")').css("-webkit-background-size","10800% 100%").css("background-repeat","no-repeat").css("background-position",.9345*a+"% 0%")}$(window).resize(function(){var a=$(".movetop").width();$(".movetop").css("height",1.5*a+"px")});var o=[0,1,2,15,28,41],p=[108,3,16,29,42,4,17,30,43,5,18,31,44,6,19,32,45],q=[109,7,20,33,46,8,21,34,47,9,22,35,48,10,23,36,49],r=[110,11,24,37,50,12,25,38,51,13,26,39,52,14,27,40,53],s=[54,55,56,69,82,95],t=[108,57,70,83,96,58,71,84,97,59,72,85,98,60,73,86,99],u=[109,61,74,87,100,62,75,88,101,63,76,89,102,64,77,90,103],v=[110,65,78,91,104,66,79,92,105,67,80,93,106,68,81,94,107];$("#taobao_sort").click(function(){w(),$(".poker_title").fadeIn("slow"),$(window).resize(function(){var a=$("#taobao_poker_small_0").css("top");return"0px"===a?!1:(w(),void 0)})}),$("#taobao_reset").click(function(){$(".movetop").css("transition","top 0.3s, left 0.3s"),$(".poker_title").fadeOut("slow");for(var a=0;108>a;a++)$("#taobao_poker_small_"+a).css("left","0px").css("top","0px").css("margin-right","-6.265%")}),$("#taobao_down").click(function(){$("body, html").animate({scrollTop:1600},"slow")});for(var a=0;108>a;a++)$("#taobao_poker_small_"+a).mouseenter(x(a,-48)),$("#taobao_poker_small_"+a).mouseleave(x(a,48));for(var y=["","Bottom-Up","Alibaba","","","Top-Down","Party Policy","","Logistics","Taobao Village","Propaganda","Taobao Store","Urbanization","City","Great Leap Forward","Statistics","Taobao Store","Transaction Map","Transaction Map","Taobao Store Owner","New Village House","House Plan","House Facade","New Village Planning","Taobao Store Owner","Delivery","Taobao Industrial Chain","Taobao Industrial Chain","New Village Planning","New Socialist Countryside","New Socialist Countryside","Young Migrant Worker"],a=0;4>a;a++)$(".poker_title").append('<div class="poker_row" id="row_'+a+'"><div class="row_'+a+'_left"><p id="title_'+8*a+'"></p><p id="title_'+(8*a+1)+'"></p><p id="title_'+(8*a+2)+'"></p><p id="title_'+(8*a+3)+'"></p></div><div class="row_'+a+'_right"><p id="title_'+(8*a+4)+'"></p><p id="title_'+(8*a+5)+'"></p><p id="title_'+(8*a+6)+'"></p><p id="title_'+(8*a+7)+'"></p></div></div>');for(var a=0;32>a;a++)0===a||3===a||4===a||7===a||$("#title_"+a).append(y[a]);for(var z=[],a=0;108>a;a++)z.push(a);for(var A=[],a=0;108>a;a++)A.push(a);A.sort(function(){return.5-Math.random()}),B(0,27,"top"),B(27,54,"right"),B(54,81,"bottom"),B(81,108,"left"),function(){for(var a=0;108>a;a++){$("#shuffle_back_"+a).click(G.bind(null,A)).click(D(a)),$("#shuffle_front_"+a).click(G.bind(null,A)).click(D(a));var b=$("#shuffle_front_"+a),c=$("#shuffle_back_"+a),d=A[a];b.data("poker-id",d),c.data("poker-id",d)}}(),$("#taobao_up").click(function(){$("body, html").animate({scrollTop:800},"slow")}),$("#taobao_showdown").click(function(){for(var a=0;108>a;a++)$("#shuffle_back_"+a).css("opacity","0")}),$("#taobao_shuffle").click(function(){A.sort(function(){return.5-Math.random()});for(var a=0;108>a;a++)$("#shuffle_back_"+a).css("opacity",1),$("#shuffle_front_"+a).fadeOut("slow").delay(800).queue(E.bind(null,a)).dequeue().fadeIn("slow")}),F(0,27,"#poker_taobao"),F(27,54,"#poker_buyer"),F(54,81,"#poker_party"),F(81,108,"#poker_seller"),$(window).scroll(function(){var a=$(window).scrollTop(),b=$(".taobao_poker").height();a>480&&800+b>a?$(".taobao_trigger_1").fadeIn("slow"):$(".taobao_trigger_1").fadeOut("slow"),a>1e3+b?$(".taobao_trigger_2").fadeIn("slow"):$(".taobao_trigger_2").fadeOut("slow")});for(var c=0;108>c;c++)$(".taobao_slide_img").append('<img id="taobao_poker_big_'+c+'" src="../img/project/taobao/poker/big/'+c+'.png"/>');for(var H,i=0,a=0;108>a;a++){$("#taobao_poker_small_"+a).click(G.bind(null,z));var K=$("#taobao_poker_small_"+a),L=z[a];K.data("poker-id",L)}$("#taobao_arrow_left").click(I),$("#taobao_arrow_right").click(J),$(document).keyup(function(a){27==a.keyCode&&($("body, html").css("overflow","auto"),$(".taobao_slide_container").hide(),$(".project_slide_container").hide())}),$(".taobao_close").click(function(){$("body, html").css("overflow","auto"),$(".taobao_slide_container").hide()})});
