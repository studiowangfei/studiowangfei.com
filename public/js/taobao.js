$(document).ready(function(){function e(){$(".project_img > img:first").fadeOut(1e3).next().fadeIn(1e3).end().appendTo(".project_img")}function g(){f=setInterval(e,4e3)}function h(){clearInterval(f)}function i(){var a=$(window).height();$(window).width();var c=$(".project_slide").height();a-c>0?$(".project_slide").css("margin-top",.5*(a-c)+"px"):$(".project_slide").css("margin-top","48px"),$("#project_arrow_left, #project_arrow_right").css("margin-top",.5*(c-72)+"px")}function k(a){return function(){j=a,$("body, html").css("overflow","hidden"),$(".project_slide_container").show(),$(".project_slide_img img").hide(),$("#project_big_"+a).fadeIn("slow"),i()}}function l(){0===j?(j=c-1,$(".project_slide_img img").hide(),$("#project_big_"+j).fadeIn("slow")):(j--,$(".project_slide_img img").hide(),$("#project_big_"+j).fadeIn("slow"))}function m(){j===c-1?(j=0,$(".project_slide_img img").hide(),$("#project_big_"+j).fadeIn("slow")):(j++,$(".project_slide_img img").hide(),$("#project_big_"+j).fadeIn("slow"))}function x(){function c(a,b,c){for(var d=1;d<a.length;d++){var e=1.5*$("#taobao_poker_small_0").width();$("#taobao_poker_small_"+a[d]).css("top",1.5*(a[0]-108-c)*e+"px"),5>d&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)-12*(d-1)+"%"),d>4&&9>d&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)+11-12*(d-5)+"%"),d>8&&13>d&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)+22-12*(d-9)+"%"),d>12&&$("#taobao_poker_small_"+a[d]).css("left",b-3-4*(a[0]-108)+33-12*(d-13)+"%")}}$(".movetop").css("transition","top 0.3s, left 0.3s").css("margin-right","-7%");for(var a=0;a<p.length;a++){var b=1.5*$("#taobao_poker_small_0").width();$("#taobao_poker_small_"+p[a]).css("top",-1.5*b+"px"),2>a&&$("#taobao_poker_small_"+p[a]).css("left","12%"),a>1&&$("#taobao_poker_small_"+p[a]).css("left",34-12*(a-1)+"%")}for(var a=0;a<t.length;a++){var b=1.5*$("#taobao_poker_small_0").width();$("#taobao_poker_small_"+t[a]).css("top",-3*b+"px"),2>a&&$("#taobao_poker_small_"+t[a]).css("left","65%"),a>1&&$("#taobao_poker_small_"+t[a]).css("left",87-12*(a-1)+"%")}c(q,0,0),c(r,0,0),c(s,0,0),c(u,53,1),c(v,53,1),c(w,53,1)}function y(a,b){return function(){$(".movetop").css("transition","top 0s, left 0s");var c=document.getElementById("taobao_poker_small_"+a),d=c.offsetTop;$("#taobao_poker_small_"+a).css("top",d+b+"px")}}function C(a,b,c){for(var d=a;b>d;d++)$(".shuffle_"+c).append('<img id="shuffle_front_'+d+'" src="../img/project/taobao/poker/small/'+B[d]+'.png"/><img class="poker_back_cover" id="shuffle_back_'+d+'" src="../img/project/taobao/poker/small/back_e.png"/>'),$("#shuffle_front_"+d).css("margin-right","-16%")}function D(a){$("#shuffle_back_"+a).click(function(){$(this).css("opacity","0")}),$("#shuffle_front_"+a).click(function(){$("#shuffle_back_"+a).css("opacity","0")})}function E(a){return D(a)}function F(a){var b=$("#shuffle_front_"+a),c=$("#shuffle_back_"+a),d=B[a];b.attr("src","../img/project/taobao/poker/small/"+d+".png"),b.data("poker-id",d),c.data("poker-id",d)}function G(a,b,c){$(c).mouseenter(function(){for(var c=a;b>c;c++)$("#shuffle_front_"+c).css("top","-48px")}),$(c).mouseleave(function(){for(var c=a;b>c;c++)$("#shuffle_front_"+c).css("top","0px")}),$(c).click(function(){for(var c=a;b>c;c++)$("#shuffle_back_"+c).css("opacity",0)})}function H(a,b){function d(){var a=$(window).height(),b=$(".taobao_slide").height();a-b>0?$(".taobao_slide").css("margin-top",.5*(a-b)+"px"):$(".taobao_slide").css("margin-top",0)}I=a;var c=$(b.target).data("poker-id");j=a.indexOf(c),$("body, html").css("overflow","hidden"),$(".taobao_slide_img img").hide(),$(".taobao_slide_container").show(),$("#taobao_poker_big_"+c).fadeIn("slow"),d(),$(window).resize(function(){var a=$(window).height(),b=$(".taobao_slide").height();a-b>0?$(".taobao_slide").css("margin-top",.5*(a-b)+"px"):$(".taobao_slide").css("margin-top",0)});var e=$(".taobao_slide").width();$("#taobao_arrow_right").css("margin-left",e-12+"px"),$(window).resize(function(){var a=$(".taobao_slide").width();$("#taobao_arrow_right").css("margin-left",a-12+"px")})}function J(){0===j?(j=107,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+I[j]).fadeIn()):(j--,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+I[j]).fadeIn("slow"))}function K(){107===j?(j=0,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+I[j]).fadeIn()):(j++,$(".taobao_slide_img img").hide(),$("#taobao_poker_big_"+I[j]).fadeIn("slow"))}var a;$(window).on("beforeunload",function(){$(window).scrollTop(0)}),$("#scroll").click(function(){$("body, html").animate({scrollTop:800},"slow")});var b=$(".outer-container").width();$(".top-section").css("width",b+"px"),$(window).resize(function(){var a=$(".outer-container").width();$(".top-section").css("width",a+"px")}),$(window).scroll(function(){$(".top-section").css("padding","6px 0px");var a=$(window).scrollTop();0===a&&$(".top-section").css("padding","12px 0px")});for(var c=9,d=0;c>d;d++)$(".project_img").append('<img id="project_small_'+d+'" src="../img/project/taobao/'+d+'_small.jpg"/>'),$(".project_slide_img").append('<img id="project_big_'+d+'" src="../img/project/taobao/'+d+'_big.jpg"/>');$(".project_img > img:gt(0)").hide();var f;$(function(){g(),$(".project_img").hover(function(){h()},function(){g()})}),$(window).resize(function(){i()});for(var j=0,n=0;c>n;n++)$("#project_small_"+n).click(k(n));$("#project_arrow_left").click(l),$("#project_arrow_right").click(m),$(".project_slide_img img").click(m),$(".project_close").click(function(){$("body, html").css("overflow","auto"),$(".project_slide_container").hide()});for(var a=0;108>a;a++){54>a?$(".taobao_items_1").append('<div class="movetop" id="taobao_poker_small_'+a+'"></div>'):$(".taobao_items_2").append('<div class="movetop" id="taobao_poker_small_'+a+'"></div>');var o=$(".movetop").width();$(".movetop").css("height",1.5*o+"px"),$("#taobao_poker_small_"+a).css("background-image",'url("../img/project/taobao/poker/taobao_sprite.png")').css("-webkit-background-size","10800% 100%").css("background-repeat","no-repeat").css("background-position",.9345*a+"% 0%")}$(window).resize(function(){var a=$(".movetop").width();$(".movetop").css("height",1.5*a+"px")});var p=[0,1,2,15,28,41],q=[108,3,16,29,42,4,17,30,43,5,18,31,44,6,19,32,45],r=[109,7,20,33,46,8,21,34,47,9,22,35,48,10,23,36,49],s=[110,11,24,37,50,12,25,38,51,13,26,39,52,14,27,40,53],t=[54,55,56,69,82,95],u=[108,57,70,83,96,58,71,84,97,59,72,85,98,60,73,86,99],v=[109,61,74,87,100,62,75,88,101,63,76,89,102,64,77,90,103],w=[110,65,78,91,104,66,79,92,105,67,80,93,106,68,81,94,107];$("#taobao_sort").click(function(){x(),$(".poker_title").fadeIn("slow"),$(window).resize(function(){var a=$("#taobao_poker_small_0").css("top");return"0px"===a?!1:(x(),void 0)})}),$("#taobao_reset").click(function(){$(".movetop").css("transition","top 0.3s, left 0.3s"),$(".poker_title").fadeOut("slow");for(var a=0;108>a;a++)$("#taobao_poker_small_"+a).css("left","0px").css("top","0px").css("margin-right","-6.265%")}),$("#taobao_down").click(function(){$("body, html").animate({scrollTop:1600},"slow")});for(var a=0;108>a;a++)$("#taobao_poker_small_"+a).mouseenter(y(a,-48)),$("#taobao_poker_small_"+a).mouseleave(y(a,48));for(var z=["","Bottom-Up","Alibaba","","","Top-Down","Party Policy","","Logistics","Taobao Village","Propaganda","Taobao Store","Urbanization","City","Great Leap Forward","Statistics","Taobao Store","Transaction Map","Transaction Map","Taobao Store Owner","New Village House","House Plan","House Facade","New Village Planning","Taobao Store Owner","Delivery","Taobao Industrial Chain","Taobao Industrial Chain","New Village Planning","New Socialist Countryside","New Socialist Countryside","Young Migrant Worker"],a=0;4>a;a++)$(".poker_title").append('<div class="poker_row" id="row_'+a+'"><div class="row_'+a+'_left"><p id="title_'+8*a+'"></p><p id="title_'+(8*a+1)+'"></p><p id="title_'+(8*a+2)+'"></p><p id="title_'+(8*a+3)+'"></p></div><div class="row_'+a+'_right"><p id="title_'+(8*a+4)+'"></p><p id="title_'+(8*a+5)+'"></p><p id="title_'+(8*a+6)+'"></p><p id="title_'+(8*a+7)+'"></p></div></div>');for(var a=0;32>a;a++)0===a||3===a||4===a||7===a||$("#title_"+a).append(z[a]);for(var A=[],a=0;108>a;a++)A.push(a);for(var B=[],a=0;108>a;a++)B.push(a);B.sort(function(){return.5-Math.random()}),C(0,27,"top"),C(27,54,"right"),C(54,81,"bottom"),C(81,108,"left"),function(){for(var a=0;108>a;a++){$("#shuffle_back_"+a).click(H.bind(null,B)).click(E(a)),$("#shuffle_front_"+a).click(H.bind(null,B)).click(E(a));var b=$("#shuffle_front_"+a),c=$("#shuffle_back_"+a),d=B[a];b.data("poker-id",d),c.data("poker-id",d)}}(),$("#taobao_up").click(function(){$("body, html").animate({scrollTop:800},"slow")}),$("#taobao_showdown").click(function(){for(var a=0;108>a;a++)$("#shuffle_back_"+a).css("opacity","0")}),$("#taobao_shuffle").click(function(){B.sort(function(){return.5-Math.random()});for(var a=0;108>a;a++)$("#shuffle_back_"+a).css("opacity",1),$("#shuffle_front_"+a).fadeOut("slow").delay(800).queue(F.bind(null,a)).dequeue().fadeIn("slow")}),G(0,27,"#poker_taobao"),G(27,54,"#poker_buyer"),G(54,81,"#poker_party"),G(81,108,"#poker_seller"),$(window).scroll(function(){var a=$(window).scrollTop(),b=$(".taobao_poker").height();a>480&&800+b>a?$(".taobao_trigger_1").fadeIn("slow"):$(".taobao_trigger_1").fadeOut("slow"),a>1e3+b?$(".taobao_trigger_2").fadeIn("slow"):$(".taobao_trigger_2").fadeOut("slow")});for(var d=0;108>d;d++)$(".taobao_slide_img").append('<img id="taobao_poker_big_'+d+'" src="../img/project/taobao/poker/big/'+d+'.png"/>');for(var I,j=0,a=0;108>a;a++){$("#taobao_poker_small_"+a).click(H.bind(null,A));var L=$("#taobao_poker_small_"+a),M=A[a];L.data("poker-id",M)}$("#taobao_arrow_left").click(J),$("#taobao_arrow_right").click(K),$(document).keyup(function(a){27==a.keyCode&&($("body, html").css("overflow","auto"),$(".taobao_slide_container").hide(),$(".project_slide_container").hide())}),$(".taobao_close").click(function(){$("body, html").css("overflow","auto"),$(".taobao_slide_container").hide()})});
